<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Trip Status</title>
  <style>
   * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', sans-serif;
        }

        .body {
            line-height: 1.6;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            padding: 0 20px;
        }
        .navbar {
            background-color: white;
            padding: 15px 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .navbar .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .navbar .logo {
            font-size: 24px;
            font-weight: bold;
        }

        .navbar .nav-links {
            display: flex;
            list-style: none;
            gap: 20px;
        }

        .navbar .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
        }

    .banner {
      background: rgba(0, 0, 0, 0.5);
      height: 250px;
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
    }

    .section-title {
      text-align: center;
      font-size: 26px;
      color: #dc2626;
      margin: 40px 0 20px;
      background-color: rgba(255, 255, 255, 0.8);
      display: inline-block;
      padding: 5px 15px;
      border-radius: 6px;
    }

    table {
      width: 90%;
      margin: 0 auto;
      border-collapse: collapse;
      background-color: rgba(255, 255, 255, 0.95);
    }

    th, td {
      padding: 12px;
      border: 1px solid #ddd;
      text-align: center;
    }

    th {
      background-color: #f0f0f0;
    }

    .cancel-btn {
      background-color: #ef4444;
      color: white;
      padding: 6px 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    
    .review-btn {
  background-color: #3b82f6; 
  color: white;
  padding: 6px 12px;
  border: none;
  border-radius: 5px;
  text-decoration: none;
  cursor: pointer;
}

.review-btn:hover {
  background-color: #2563eb; /* Darker blue */
}


    .text-danger { color: red; font-weight: bold; }
    .text-success { color: green; font-weight: bold; }
    .text-pending { color: #eab308; font-weight: bold; } /* Yellow color for pending status */

    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal-content {
      background: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
    }

    .modal-content button {
      margin: 10px;
      padding: 8px 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .confirm-btn { background-color: #10b981; color: white; }
    .close-btn { background-color: #9ca3af; color: white; }
    
   .modal1 {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal-content1 {
      background: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
    }

    .modal-content1 button {
      margin: 10px;
      padding: 8px 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .confirm-btn1 { background-color: #10b981; color: white; }
    .close-btn1 { background-color: #9ca3af; color: white; }
  </style>
</head>
<body>

    <header class="navbar body">
        <div class="container">
            <div class="logo"><span style="color: red;">TRAVEL KARNATAKA</span></div>
            <nav>
                <ul class="nav-links">
                    <li><a href="#home">Home</a></li>
                    <li><a href="">Bookings</a></li>
                    <li><a href="#status">Status</a></li>
                    <li><a th:href="@{/service/reviewpage}">FeedBack</a></li>
                    <li><a th:href="@{/service/contact}">Contact</a></li>
                    <li><a href="#" onclick="openLogoutModal()">Logout</a></li>
                </ul>
            </nav>
        </div>
    </header>

<section class="banner">
  <h1>Track Your Travel Booking Status</h1>
</section>

<h2 class="section-title">Your Trips</h2>
<div th:if="${error}" style="color: red; text-align: center; margin-top: 20px;">
    <p th:text="${error}"></p>
</div>
<table>
  <thead>
    <tr>
      <th>Trip Name</th>
      <th>Price</th>
      <th>Booked On</th>
      <th>Trip Date</th>
      <th>Status</th>
      <th>Action</th>
      <th>Rating</th>
    </tr>
  </thead>
  <tbody>
    <tr th:each="trip : ${trips}">
    <td th:text="${trip.name}"></td>
    <td th:text="'â‚¹' + ${trip.price}"></td>
    <td th:text="${trip.bookedDate}"></td>
    <td th:text="${trip.tripDate}"></td>
     <td>
  <span th:switch="${trip.status}">
    <span th:case="'Canceled'" class="text-danger" th:text="${trip.status}"></span>
    <span th:case="'Booked'" class="text-success" th:text="${trip.status}"></span>
    <span th:case="'BookConfirm'" class="text-success" th:text="${trip.status}"></span>
    <span th:case="'pending'" class="text-pending" th:text="${trip.status}"></span>
    <span th:case="*"
          th:text="${trip.status}"></span>
  </span>
</td>
  <td>
        <button class="cancel-btn"
                th:if="${trip.status != 'Canceled'}"
                th:attr="data-id=${trip.id}"
                onclick="openModal(this)">
            Cancel
        </button>
    </td>
      <td>
        <a th:href="@{/service/reviewpage}" class="review-btn">Review</a>   
      
    </td>
</tr>


  </tbody>
</table>

<!-- Cancel Confirmation Modal -->
<div id="cancelModal" class="modal">
  <div class="modal-content">
    <p>Are you sure you want to cancel this trip?</p>
    <form method="post" th:action="@{/divya/cancel}">
      <input type="hidden" name="tripId" id="tripIdToCancel" />
      <button type="submit" class="confirm-btn">Yes</button>
      <button type="button" class="close-btn" onclick="closeModal()">No</button>
    </form>
  </div>
</div>


 <!-- Logout Confirmation Modal -->
<div id="logoutModal" class="modal1">
  <div class="modal-content1">
    <p>Are you sure you want to logout?</p>
    <form method="get" th:action="@{/travel/logout}">
      <button type="submit" class="confirm-btn1">Yes, Logout</button>
      <button type="button" class="close-btn1" onclick="closeLogoutModal()">Cancel</button>
    </form>
  </div>
</div>

<script>
  function openLogoutModal() {
    document.getElementById("logoutModal").style.display = "flex";
  }

  function closeLogoutModal() {
    document.getElementById("logoutModal").style.display = "none";
  }
</script>

</body>
</html>
